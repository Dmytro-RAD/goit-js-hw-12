{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '50331031-463f70f86d851a00b481c2fad',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n  },\n});\n\nexport default async function getImagesByQuery(query, page = 1) {\n  try {\n    const res = await instance.get('', {\n      params: {\n        q: query,\n        page,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images: ' + error.message);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryElem = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadbtn = document.querySelector('.loadbtn');\n\nexport function createGallery({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n        width=\"360\"\n        height=\"200\"\n      />\n    </a>\n    <div class=\"info\">\n  <div class=\"info-item\">\n    <p class=\"text-info\">Likes</p>\n    <p class=\"value-info\">${likes}</p>\n  </div>\n  <div class=\"info-item\">\n    <p class=\"text-info\">Views</p>\n    <p class=\"value-info\">${views}</p>\n  </div>\n  <div class=\"info-item\">\n    <p class=\"text-info\">Comments</p>\n    <p class=\"value-info\">${comments}</p>\n  </div>\n  <div class=\"info-item\">\n    <p class=\"text-info\">Downloads</p>\n    <p class=\"value-info\">${downloads}</p>\n  </div>\n</div>\n\n  </li>`;\n}\n\nexport function imagesGallery(images) {\n  return images.map(createGallery).join('');\n}\n\nexport function renderImages(images) {\n  showLoader();\n\n  try {\n    const markup = imagesGallery(images);\n    galleryElem.insertAdjacentHTML('beforeend', markup);\n    refreshLightbox();\n  } finally {\n    hideLoader();\n  }\n}\n\nlet lightbox;\n\nexport function initLightbox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.hidden = false;\n}\n\nexport function hideLoader() {\n  loader.hidden = true;\n}\n\nexport function showLoadMoreButton() {\n  loadbtn.hidden = false;\n}\n\nexport function hideLoadMoreButton() {\n  loadbtn.hidden = true;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api.js';\n\nimport {\n  renderImages,\n  initLightbox,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\nlet currentQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst formElem = document.querySelector('.form');\nconst inputElem = document.querySelector('.input-form');\nconst LoadBtnElem = document.querySelector('.loadbtn');\n\ninitLightbox();\n\nformElem.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = inputElem.value.trim();\n\n  if (!currentQuery) {\n    iziToast.show({\n      message: 'Please enter a search query!',\n      color: 'yellow',\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        imageWidth: 24,\n      });\n      return;\n    }\n\n    renderImages(data.hits);\n\n    if (totalHits > page * 15) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Error fetching images: ${error.message}`,\n      color: 'red',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nLoadBtnElem.addEventListener('click', async e => {\n  e.preventDefault();\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, page);\n    renderImages(data.hits);\n    smoothScroll();\n\n    if (page * 15 >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n      });\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Error fetching images: ${error.message}`,\n      color: 'red',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["instance","axios","getImagesByQuery","query","page","error","galleryElem","loader","loadbtn","createGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesGallery","images","renderImages","showLoader","markup","refreshLightbox","hideLoader","lightbox","initLightbox","SimpleLightbox","clearGallery","showLoadMoreButton","hideLoadMoreButton","currentQuery","totalHits","formElem","inputElem","LoadBtnElem","event","iziToast","data","e","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAWC,EAAM,OAAO,CAC5B,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACX,CACH,CAAC,EAEc,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CAC9D,GAAI,CAOF,OANY,MAAMJ,EAAS,IAAI,GAAI,CACjC,OAAQ,CACN,EAAGG,EACH,KAAAC,CACD,CACP,CAAK,GACU,IACZ,OAAQC,EAAO,CACd,MAAM,IAAI,MAAM,2BAA6BA,EAAM,OAAO,CAC3D,CACH,CCvBA,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAc,CAC5B,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,oCAC2BL,CAAa;AAAA;AAAA;AAAA,eAGlCD,CAAY;AAAA,eACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAQSC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,4BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,QAKrC,CAEO,SAASC,EAAcC,EAAQ,CACpC,OAAOA,EAAO,IAAIT,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEO,SAASU,EAAaD,EAAQ,CACnCE,IAEA,GAAI,CACF,MAAMC,EAASJ,EAAcC,CAAM,EACnCZ,EAAY,mBAAmB,YAAae,CAAM,EAClDC,GACJ,QAAY,CACRC,GACD,CACH,CAEA,IAAIC,EAEG,SAASC,GAAe,CAC7BD,EAAW,IAAIE,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CAEO,SAASJ,GAAkB,CAC5BE,GACFA,EAAS,QAAO,CAEpB,CAEO,SAASG,GAAe,CAC7BrB,EAAY,UAAY,EAC1B,CAEO,SAASc,GAAa,CAC3Bb,EAAO,OAAS,EAClB,CAEO,SAASgB,GAAa,CAC3BhB,EAAO,OAAS,EAClB,CAEO,SAASqB,GAAqB,CACnCpB,EAAQ,OAAS,EACnB,CAEO,SAASqB,GAAqB,CACnCrB,EAAQ,OAAS,EACnB,CClFA,IAAIsB,EAAe,GACf1B,EAAO,EACP2B,EAAY,EAEhB,MAAMC,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,UAAU,EAErDT,IAEAO,EAAS,iBAAiB,SAAU,MAAMG,GAAS,CAIjD,GAHAA,EAAM,eAAc,EACpBL,EAAeG,EAAU,MAAM,OAE3B,CAACH,EAAc,CACjBM,EAAS,KAAK,CACZ,QAAS,+BACT,MAAO,QACb,CAAK,EACD,MACD,CAEDhC,EAAO,EACPuB,IACAE,IACAT,IAEA,GAAI,CACF,MAAMiB,EAAO,MAAMnC,EAAiB4B,EAAc1B,CAAI,EAGtD,GAFA2B,EAAYM,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QACE,2EACF,MAAO,MACP,WAAY,EACpB,CAAO,EACD,MACD,CAEDjB,EAAakB,EAAK,IAAI,EAElBN,EAAY3B,EAAO,IACrBwB,GAEH,OAAQvB,EAAO,CACd+B,EAAS,KAAK,CACZ,QAAS,0BAA0B/B,EAAM,OAAO,GAChD,MAAO,KACb,CAAK,CACL,QAAY,CACRkB,GACD,CACH,CAAC,EAEDW,EAAY,iBAAiB,QAAS,MAAMI,GAAK,CAC/CA,EAAE,eAAc,EAChBlC,GAAQ,EACRgB,IAEA,GAAI,CACF,MAAMiB,EAAO,MAAMnC,EAAiB4B,EAAc1B,CAAI,EACtDe,EAAakB,EAAK,IAAI,EACtBE,IAEInC,EAAO,IAAM2B,IACfF,IACAO,EAAS,KAAK,CACZ,QAAS,6DACT,MAAO,MACf,CAAO,EAEJ,OAAQ/B,EAAO,CACd+B,EAAS,KAAK,CACZ,QAAS,0BAA0B/B,EAAM,OAAO,GAChD,MAAO,KACb,CAAK,CACL,QAAY,CACRkB,GACD,CACH,CAAC,EAED,SAASgB,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}